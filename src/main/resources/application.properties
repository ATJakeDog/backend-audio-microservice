spring.application.name=GANTone
server.port=${PORT:8080}

# === DATABASE (SUPABASE POOLER FIX) ===
# Используем URL дважды, чтобы удовлетворить и Spring, и Hibernate напрямую
spring.datasource.url=jdbc:postgresql://aws-1-ap-southeast-2.pooler.supabase.com:6543/postgres?prepareThreshold=0
jakarta.persistence.jdbc.url=jdbc:postgresql://aws-1-ap-southeast-2.pooler.supabase.com:6543/postgres?prepareThreshold=0
spring.datasource.username=postgres.indfolgrefrdhmsyswus
spring.datasource.password=ATJakeDog27$
spring.datasource.driver-class-name=org.postgresql.Driver

# ЖЕСТКОЕ УКАЗАНИЕ ДИАЛЕКТА (чтобы не было ошибки Dialect metadata)
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Оптимизация под пуллер
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.connection-timeout=30000
spring.jpa.hibernate.ddl-auto=update
# Отключаем попытки Hibernate сканировать базу при старте
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=false

# === AIVEN KAFKA ===
spring.kafka.bootstrap-servers=audio-microservice-audio-microservice.b.aivencloud.com:10936
spring.kafka.properties.security.protocol=SSL